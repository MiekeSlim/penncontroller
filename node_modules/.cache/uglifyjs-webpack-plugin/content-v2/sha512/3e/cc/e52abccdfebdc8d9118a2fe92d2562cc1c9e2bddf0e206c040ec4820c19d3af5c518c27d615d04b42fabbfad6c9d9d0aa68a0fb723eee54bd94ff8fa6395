{"code":"!function(e){var t={};function n(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:s})},n.r=function(e){Object.defineProperty(e,\"__esModule\",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=65)}({65:function(e,t){PennController._AddElementType(\"Selector\",function(e){function t(t,...n){let s=[];if(n.length)for(let t in n){if(!(n._element&&n._element.jQueryElement instanceof jQuery)){console.warn(\"Invalid element #\"+t+\" in shuffling selector \"+this.id+\" in PennController #\"+e.controllers.running.id);continue}let i=this.elements.map(e=>e[0]).indexOf(n._element);i<0?console.warn(\"Cannot shuffle element \"+element.id+\" for it has not been added to selector \"+this.id+\" in PennController #\"+e.controllers.running.id):s.push(this.elements[i])}else s=[].concat(this.elements);let i=[].concat(s);fisherYates(i);let l=i.map((e,t)=>Object({old:{element:s[t],index:this.elements.indexOf(s[t])},new:{element:e,index:this.elements.indexOf(e)}})),o=[];l.map((e,t)=>{this.elements[e.old.index]=e.new.element;let n=$(\"<shuffle>\").attr(\"i\",t);e.old.element[0].jQueryElement.before(n),n.css({position:e.old.element[0].jQueryElement.css(\"position\"),left:e.old.element[0].jQueryElement.css(\"left\"),top:e.old.element[0].jQueryElement.css(\"top\")}),o.push(n)}),o.map(e=>{let t=e.attr(\"i\"),n=l[t].new.element[0].jQueryElement;e.after(n),n.css({position:e.css(\"position\"),left:e.css(\"left\"),top:e.css(\"top\")}),this.selections.length&&this.selections[this.selections.length-1][1]==l[t].new.element[0].id&&n.before(this.frame),e.remove()}),t()}this.immediate=function(e){},this.uponCreation=function(t){this.elements=[],this.selections=[],this.disabled=!1,this.frame=$(\"<div>\").css({position:\"absolute\",display:\"inline-block\",border:\"dotted 1px grey\",\"z-index\":100}).addClass(\"PennController-\"+this.type+\"-selectionFrame\"),this.noClick=!1,this.select=(t=>{if(!this.disabled){if(this.elements.map(e=>e[0]).indexOf(t)<0)return console.warn(\"Tried to select an element not part of selector \"+this.id+\" in PennController #\"+e.controllers.running.id);this.selections.push([\"Selection\",t.id,Date.now(),\"NULL\"]),this.frame.css({width:t.jQueryElement.width(),height:t.jQueryElement.height(),\"pointer-events\":\"none\"}),\"absolute\"==t.jQueryElement.css(\"position\")&&this.frame.css({left:t.jQueryElement.css(\"left\"),top:t.jQueryElement.css(\"top\")}),t.jQueryElement.before(this.frame),this.elements.map(e=>e[0].jQueryElement.removeClass(\"PennController-\"+this.type+\"-selected\")),t.jQueryElement.addClass(\"PennController-\"+this.type+\"-selected\")}}),e.controllers.running.safeBind($(document),\"keydown\",e=>{if(!this.disabled)for(let t in this.elements){let n=\"\";if(this.elements[t].length>1&&(n=this.elements[t][1]),n&&\"string\"==typeof n&&n.match(RegExp(String.fromCharCode(e.which),\"i\")))return this.select(this.elements[t][0])}}),t()},this.end=function(){if(this.elements=[],this.frame.remove(),this.log&&this.log instanceof Array)if(this.selections.length)if(1==this.selections.length)e.controllers.running.save(this.type,this.id,...this.selections[0]);else if(this.log.indexOf(\"all\")>-1)for(let t in this.selections)e.controllers.running.save(this.type,this.id,...this.selections[t]);else this.log.indexOf(\"first\")>-1&&e.controllers.running.save(this.type,this.id,...this.selections[0]),this.log.indexOf(\"last\")>-1&&e.controllers.running.save(this.type,this.id,...this.selections[this.selections.length-1]);else e.controllers.running.save(this.type,this.id,\"Selection\",\"NA\",\"Never\",\"No selection happened\")},this.value=function(){if(this.selections.length){let e=this.selections[this.selections.length-1][1];return PennController.Elements[\"get\"+e.type](e.id)}return null},this.actions={select:function(t,n){if(!isNaN(Number(n))&&Number(n)>=0&&Number(n)<this.elements.length&&(n={_element:this.elements[Number(n)][0]}),n._element&&n._element.jQueryElement instanceof jQuery){let e=this.disabled;this.disabled=!1,this.select(n._element),this.disabled=e}else console.warn(\"Invalid element passed to select command for selector \"+this.id+\" in PennController #\"+e.controllers.running.id);t()},shuffle:function(e,...n){t.apply(this,[e].concat(n))},unselect:function(e){this.selections.push([\"Unselect\",\"Unselect\",Date.now(),\"From script\"]),this.frame.detach(),this.elements.map(e=>e[0].jQueryElement.removeClass(\"PennController-\"+this.type+\"-selected\")),e()},wait:function(e,t){if(\"first\"==t&&this.selections.length)e();else{let n=!1,s=this.select;this.select=(i=>{let l=s.apply(this,[i]);n||this.disable&&!l||(t instanceof Object&&t._runPromises&&t.success?t._runPromises().then(t=>{\"success\"==t&&(n=!0,e())}):(n=!0,e()))})}}},this.settings={add:function(t,...n){for(w in n){let t=n[w]._element;void 0==t||void 0==t.id?console.warn(\"Invalid element added to selector \"+this.id+\" in PennController #\"+e.controllers.running.id):this.elements.map(e=>e[0]).indexOf(t)>-1?console.warn(\"Element \"+t.id+\" already part of selector \"+this.id+\" in PennController #\"+e.controllers.running.id):void 0!=t.jQueryElement&&t.jQueryElement instanceof jQuery?(this.elements.push([t]),this.noClick||t.jQueryElement.css(\"cursor\",\"pointer\"),t.jQueryElement.click(()=>{this.noClick||this.select(t)})):console.warn(\"Element \"+t.id+\" has no visble element to be chosen in selector \"+this.id+\" in PennController #\"+e.controllers.running.id)}t()},callback:function(e,...t){let n=this.select;this.select=async function(e){if(n.apply(this,[e]),!this.disabled)for(let e in t)await t[e]._runPromises()},e()},disable:function(e){this.disabled=!0,this.elements.map(e=>e[0].jQueryElement.css(\"cursor\",\"\")),e()},disableClicks:function(e,t){this.noClick=!0,this.elements.map(e=>e[0].jQueryElement.css(\"cursor\",\"\")),e()},enable:function(e){this.disabled=!1,this.noClick||this.elements.map(e=>e[0].jQueryElement.css(\"cursor\",\"pointer\")),e()},enableClicks:function(e){this.noClick=!1,this.elements.map(e=>e[0].jQueryElement.css(\"cursor\",\"pointer\")),e()},frame:function(e,t){this.frame.css.apply(this.frame,[\"border\",t]),e()},keys:function(e,...t){for(let e in t){if(e>=this.elements.length)break;let n=t[e];Number(n)>0&&(n=String.fromCharCode(n)),this.elements[e]=[this.elements[e][0],n]}e()},log:function(e,...t){t.length?this.log=t:this.log=[\"last\"],e()},once:function(e){if(this.selections.length)this.disabled=!0,this.elements.map(e=>e[0].jQueryElement.css(\"cursor\",\"\"));else{let e=this.select;this.select=(t=>{if(e.apply(this,[t]),!this.disabled)return this.disabled=!0,this.elements.map(e=>e[0].jQueryElement.css(\"cursor\",\"\")),\"once\"})}e()},shuffle:function(e,...n){t.apply(this,[e].concat(n))}},this.test={selected:function(t){return void 0==t?this.selections.length:t._element?this.selections[this.selections.length-1][1]==t._element.id:(console.warn(\"Invalid element tested for selector \"+this.id+\" in PennController #\"+e.controllers.running.id,t._element.id),!1)},index:function(t,n){return void 0==t||void 0==t._element?console.warn(\"Invalid element tested for selector \"+this.id+\" in PennController #\"+e.controllers.running.id,t._element.id):Number(n)>=0?this.elements.map(e=>e[0]).indexOf(t._element)==Number(n):this.elements.map(e=>e[0]).indexOf(t._element)>=0}}}),PennController._AddStandardCommands(function(e){this.settings={selector:async function(t,n){var s;\"string\"==typeof n?(s=e.controllers.running.options.elements[n])||console.warn(\"No selector found named \"+n+\" for PennController #\"+e.controllers.running.id):n._element&&n._runPromises&&(\"Selector\"==n._element.type?(await n._runPromises(),s=n._element):console.warn(\"Tried to add \"+this.name+\" to an invalid selector in PennController #\"+e.controllers.running.id)),s.elements.map(e=>e[0]).indexOf(this)>-1?console.warn(\"Element \"+this.id+\" already part of selector \"+s.id+\" in PennController #\"+e.controllers.running.id):void 0!=this.jQueryElement&&this.jQueryElement instanceof jQuery?(s.elements.push([this]),this.noClick||this.jQueryElement.css(\"cursor\",\"pointer\"),this.jQueryElement.click(()=>{s.noClick||s.select(this)})):console.warn(\"Element \"+this.id+\" has no visble element to be chosen in selector \"+s.id+\" in PennController #\"+e.controllers.running.id),t()}}})}});","extractedComments":[]}