{"code":"/*!\n * This software is licensed under a BSD license; see the LICENSE file for details.\n * \n *  - Version beta 0.4\n *  - Last Update:  2018, September 11\n *  - Major changes in beta 0.4:\n *     * Fixed a bug with FeedItems in group designs, no longer relies on latin squares (setItems now obsolete)\n *     * Fixed 'invalid format' bug with FeedItems(PennController.defaultTable)\n *     * FeedItems no longer gets overridden by later definitions of 'items'\n *     * FeedItems no longer generates items for non-running groups (preventing unnecessarily loading unused resources)\n *     * Fixed a bug that made selector.select inoperative\n *     * Fixed a bug that made selector.settings.once break selector.wait\n *     + Can now upload CSV tables directly to chunk_includes\n *     + Added a \"Loading, please wait\" message\n *     + Added .label to FeedItems, to define constant string labels (useful when reusing spreadsheets)\n *     + Added .setLabelColumn, .setGroupColumn and .setItemColumn to GetTable (setLabel, setGroup and setItem now deprecated)\n *     + Added log entries to report even when no element-specific event happen\n *     + Added element type Video\n *     + Added test command .index for Selector\n *     + Added options for scale.settings.log (last, first, etc.)\n */!function(t){var e={};function n(l){if(e[l])return e[l].exports;var i=e[l]={i:l,l:!1,exports:{}};return t[l].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,l){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:l})},n.r=function(t){Object.defineProperty(t,\"__esModule\",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"\",n(n.s=60)}({60:function(t,e){!function(){var t=null;let e=PennController.ResetPrefix;PennController.ResetPrefix=function(n){e(n),t=\"string\"==typeof t?window[n]:window},PennController._AddElementType(\"Var\",function(e){this.immediate=function(n,l){let i=PennController.Elements.getVar,o=e.controllers.underConstruction;PennController.Elements.getVar=function(t){let l=e.controllers.underConstruction.elements[n];if(t!=n||l&&\"Var\"==l.type)return i(t);{let n=e.controllers.running,l=e.controllers.underConstruction;e.controllers.running=null,e.controllers.underConstruction=o;let r=i(t);return e.controllers.running=n,e.controllers.underConstruction=l,r}},t&&(t.getVar=PennController.Elements.getVar),this.initialValue=l,this.value=l,this.scope=\"local\",this.evaluate=(()=>this.value&&\"Var\"===this.value.type?this.value.evaluate():this.value)},this.uponCreation=function(t){let n=e.controllers.running.options.elements[this.id];n&&\"global\"==n.scope&&n!=this?this.value=n.value:\"local\"==this.scope&&(this.value=this.initialValue),this.values=[],t()},this.end=function(){if(this.log&&this.log instanceof Array&&(this.log.indexOf(\"final\")>-1&&e.controllers.running.save(this.type,this.id,\"Final\",this.value,Date.now(),\"Value at the end of the trial\"),this.log.indexOf(\"set\")>-1)){for(let t in this.values)e.controllers.running.save(this.type,this.id,...this.values[t]);this.values.length||e.controllers.running.save(this.type,this.id,\"Set\",\"NA\",\"Never\",\"The Var element was never set during the trial\")}},this.value=function(){return this.evaluate()},this.actions={set:function(t,e){\"object\"==typeof e&&e.hasOwnProperty(\"value\")?this.value=e.value:e instanceof Function?this.value=e.apply(this,[this.value]):this.value=e,this.values.push([\"Set\",this.value,Date.now(),\"NULL\"]),t()}},this.settings={local:function(t){for(c in this.scope=\"local\",e.controllers.list)e.controllers.list[c][this.id]==this&&(e.controllers.list[c][this.id]=null);t()},log:function(t,...e){e.length?this.log=e:this.log=[\"final\"],t()},global:function(t){for(c in this.scope=\"global\",e.controllers.list)e.controllers.list[c].elements[this.id]=this;t()}},this.test={is:function(t){return t instanceof RegExp?this.evaluate().match(t):t instanceof Function?t(this.evaluate()):this.evaluate()==t}}}),PennController._AddStandardCommands(function(t){this.actions={setVar:function(e,n){if(\"string\"==typeof n){let e=t.controllers.running.options.elements[n];e.type&&\"Var\"==e.type?e.value=PennController.Elements[\"get\"+this.type](this.id).value:console.warn(\"Invalid variable reference when trying to store \"+this.id+\"'s value in PennController #\"+t.controllers.running.id,n)}else console.warn(\"Invalid variable reference when trying to store \"+this.id+\"'s value in PennController #\"+t.controllers.running.id,n);e()}}})}()}});","extractedComments":[]}