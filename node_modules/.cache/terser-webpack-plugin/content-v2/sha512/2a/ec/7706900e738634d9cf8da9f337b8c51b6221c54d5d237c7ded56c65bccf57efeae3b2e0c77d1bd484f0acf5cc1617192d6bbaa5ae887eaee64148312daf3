{"code":"/*! $AC$ PennController.newMouseTracker(name) Creates a new MouseTracker element $AC$$AC$ PennController.getMouseTracker(name) Retrieves an existing MouseTracker element $AC$$AC$ EyeTracker PElement.calibrate(threshold,attempts) Starts a sequence of calibration $AC$$AC$ EyeTracker PElement.hideFeedback() Hides the red dot estimating the position of the eyes on the page $AC$$AC$ EyeTracker PElement.start() Starts parsing eye movements $AC$$AC$ EyeTracker PElement.stop() Stops parsing eye movements $AC$$AC$ EyeTracker PElement.stopTraining() Stop training the model whenever the mouse moves or clicks $AC$$AC$ EyeTracker PElement.showFeedback() Shows the red dot estimating the position of the eyes on the page $AC$$AC$ EyeTracker PElement.train() Starts training the model on every click and mouse movement (default) $AC$$AC$ EyeTracker PElement.settings.add(elements) Adds one or more elements of interest to the EyeTracker $AC$$AC$ EyeTracker PElement.settings.callback(function) Runs the specified javascript function whenever the eyes look at an element of interest $AC$$AC$ EyeTracker PElement.settings.log() Logs the X and Y positions of the eyes every N milliseconds (see documentation) $AC$$AC$ EyeTracker PElement.settings.trainOnMouseMove(true) Tells the model whether to use mouse movements to improve its estimations $AC$ */!function(e){var t={};function n(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)n.d(s,i,function(t){return e[t]}.bind(null,i));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=139)}({139:function(e,t){window.PennController._AddElementType(\"MouseTracker\",function(e){this.immediate=function(t,n,s){initiated||function(){sessionID=e.utils.guidGenerator(),initiated=!0;let t=document.createElement(\"script\");t.setAttribute(\"src\",\"https://files.lab.florianschwarz.net/ibexfiles/webgazer/webgazer.js\"),document.head.appendChild(t);let n=()=>{if(window.webgazer){tracker=window.webgazer.setRegression(\"weightedRidge\").setTracker(\"clmtrackr\").setGazeListener((e,t)=>{storePoints&&(past50Array[0].push(e.x),past50Array[1].push(e.y),past50Array[0].length>50&&past50Array[0].shift(),past50Array[1].length>50&&past50Array[1].shift()),currentTracker&&currentTracker.look(e,t)});let e=document.addEventListener;document.addEventListener=function(...t){\"mousemove\"!=t[0]||\"function\"!=typeof t[1]||moveEvent||(moveEvent=t[1]),e.apply(document,t)},tracker.begin().showPredictionPoints(!0),showTracker(!1)}else setTimeout(n,100)};void 0===tracker&&n()}(),\"number\"==typeof t&&(void 0===n||\"number\"==typeof n&&void 0===s)&&(s=n,n=t,this.id=e.utils.guidGenerator()),this.span=Number(n),this.proportion=s},this.uponCreation=function(e){let t;this.enabled=!1,this.elements=[],this.counts={times:[]},this.callback=null,this.log=!1,this.trainOnMouseMove=!0,this.look=function(e,n){if(this.enabled&&null!=e&&void 0!==e.x&&void 0!==e.y){this.elements.map(e=>e.jQueryElement.removeClass(\"PennController-eyetracked\"));for(let t=0;t<this.elements.length;t++){let n=this.elements[t].jQueryElement,s=n.offset(),i=n.width(),o=n.height(),r=s.left<=e.x&&s.top<=e.y&&s.left+i>=e.x&&s.top+o>=e.y;if(r?this.counts[\"_\"+this.elements[t].id].push(1):this.counts[\"_\"+this.elements[t].id].push(0),isNaN(this.span))r&&(n.addClass(\"PennController-eyetracked\"),this.callback&&this.callback instanceof Function&&this.callback.call(this.elements[t],e.x,e.y));else{this.hasOwnProperty(\"gazes\")&&this.elements.length==this.gazes.length||(this.gazes=this.elements.map(()=>[])),r?this.gazes[t].push(!0):this.gazes[t].push(!1),this.gazes[t].length>this.span&&this.gazes[t].shift();let s=Number(this.proportion);isNaN(s)&&(s=this.span/100),s<=0?s=.01:s>=1&&(s=.99),this.gazes[t].filter(e=>e).length/this.gazes[t].length>s&&n.addClass(\"PennController-eyetracked\"),this.callback&&this.callback instanceof Function&&this.callback.call(this.elements[t],e.x,e.y)}}void 0===t&&(t=n),this.counts.times.push(Math.round(n-t)),t=n}},e()},this.end=function(){if(showTracker(!1),getGazer().removeMouseEventListeners(),this.enabled=!1,currentTracker=void 0,this.log&&this.counts.times.length){let t=\"https://files.lab.florianschwarz.net/ibexfiles/RecordingsFromIbex/trackerData.php\",n=window.location.href.replace(/[^\\/]+$/,\"\").replace(/[^\\w\\d]/g,\"\").replace(/[\\.]{2,}/g,\"\");e.debug.log(\"expname\",n);let s=(s,i)=>{let o={experiment:n,id:sessionID,pcnumber:e.controllers.running.id,parameter:s,value:i},r=\"json=\"+JSON.stringify(o);var a=new XMLHttpRequest;a.open(\"POST\",t,!0),a.setRequestHeader(\"Content-Type\",\"application/x-www-form-urlencoded\"),a.onreadystatechange=(()=>{200!=a.status&&e.controllers.running.save(this.type,this.id,\"Upload\",\"Error\",Date.now(),s)}),a.send(r)};e.debug.log(\"about to send times\",this.counts),s(\"times\",lzw_encode(this.counts.times.join(\".\"))),delete this.counts.times;let i=Object.keys(this.counts);for(let e=0;e<i.length;e++)s(i[e],lzw_encode(this.counts[i[e]].join(\".\")));e.controllers.running.save(this.type,this.id,\"Filename\",n+\"/\"+sessionID,Date.now(),\"NULL\")}delete this.counts},this.value=function(){return\"EyeTracker\"},this.actions={calibrate(e,t,n){Number(n)>0||(n=-1),calibrate(e,this,t,n)},hideFeedback:function(e){showTracker(!1),e()},start:function(e){this.enabled=!0,currentTracker=this,e()},stop:function(e){this.enabled=!1,currentTracker=void 0,e()},stopTraining:function(e){getGazer().removeMouseEventListeners(),getGazer().showPredictionPoints(!1),e()},showFeedback:function(e){showTracker(),e()},train:function(e,t){getGazer().addMouseEventListeners(),this.trainOnMouseMove||document.removeEventListener(\"mousemove\",moveEvent,!0),getGazer().showPredictionPoints(t),e()}},this.settings={add:function(e,...t){for(let e=0;e<t.length;e++){let n=t[e];n&&n._element&&this.elements.indexOf(n._element)<0&&(this.elements.push(n._element),this.counts[\"_\"+n._element.id]=[])}e()},callback:function(e,t){t instanceof Function&&(this.callback=t),e()},log:function(e){this.log=!0,e()},trainOnMouseMove:function(e,t){this.trainOnMouseMove=void 0===t||t,this.trainOnMouseMove||document.removeEventListener(\"mousemove\",moveEvent,!0),e()}}})}});","extractedComments":[]}